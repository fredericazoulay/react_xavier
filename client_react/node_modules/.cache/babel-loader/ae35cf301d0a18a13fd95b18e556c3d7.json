{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\DELL\\\\VM\\\\Projects\\\\react_xavier\\\\client_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\DELL\\\\VM\\\\Projects\\\\react_xavier\\\\client_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\DELL\\\\VM\\\\Projects\\\\react_xavier\\\\client_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\DELL\\\\VM\\\\Projects\\\\react_xavier\\\\client_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\DELL\\\\VM\\\\Projects\\\\react_xavier\\\\client_react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\DELL\\\\VM\\\\Projects\\\\react_xavier\\\\client_react\\\\src\\\\components\\\\Etudiants\\\\Etudiants.js\";\nimport React from 'react';\nimport { handleResponse } from '../../helpers';\nimport { API_URL } from '../../config';\nimport TableEtudiants from './TableEtudiants/TableEtudiants.js';\nimport Loading from '../shared/Loading/Loading'; // Access to fetch at 'http://127.0.0.1:5000/api/v1.0/etudiant' from origin 'http://localhost:3000' has been blocked \n// by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.\n\nvar Etudiants =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Etudiants, _React$Component);\n\n  function Etudiants() {\n    var _this;\n\n    _classCallCheck(this, Etudiants);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Etudiants).call(this));\n    _this.state = {\n      loading: false,\n      etudiants: [],\n      error: null\n    };\n    return _this;\n  }\n\n  _createClass(Etudiants, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchEtudiants();\n    } //componentDidUpdate() {\n    //this.fetchEtudiants();\n    //}\n\n  }, {\n    key: \"fetchEtudiants\",\n    value: function fetchEtudiants() {\n      var _this2 = this;\n\n      this.setState({\n        loading: true\n      });\n      fetch(\"\".concat(API_URL, \"/etudiant\"), {\n        method: 'get',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': 'GET POST PUT DELETE OPTIONS',\n          'Access-Control-Allow-Credentials': 'true'\n        }\n      }).then(handleResponse).then(function (data) {\n        var etudiants = data.item;\n        console.log(etudiants);\n\n        _this2.setState({\n          etudiants: etudiants,\n          loading: false\n        });\n      }).catch(function (error) {\n        _this2.setState({\n          error: error.errorMessage,\n          loading: false\n        });\n      });\n    }\n  }, {\n    key: \"refreshStudent\",\n    value: function refreshStudent(students, student) {\n      //getstate();\n      console.log('refresh' + student.id_etudiant);\n      console.log(students);\n      students.splice(students.indexOf(student), 1);\n      console.log(students); //console.log(this.state.etudiants.indexOf(student.id_etudiant))\n      //this.state.etudiants.splice(this.state.etudiants.indexOf(student.id_etudiant), 1)\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          loading = _this$state.loading,\n          error = _this$state.error,\n          etudiants = _this$state.etudiants;\n\n      if (loading) {\n        return React.createElement(\"div\", {\n          className: \"loading-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }));\n      }\n\n      if (error) {\n        return React.createElement(\"div\", {\n          className: \"error\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, error);\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(TableEtudiants, {\n        etudiants: etudiants,\n        rerender: this.refreshStudent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Etudiants;\n}(React.Component);\n\nexport default Etudiants; // <TableEtudiants etudiants={etudiants} rerender={this.fetchEtudiants}/>","map":{"version":3,"sources":["C:\\Users\\DELL\\VM\\Projects\\react_xavier\\client_react\\src\\components\\Etudiants\\Etudiants.js"],"names":["React","handleResponse","API_URL","TableEtudiants","Loading","Etudiants","state","loading","etudiants","error","fetchEtudiants","setState","fetch","method","headers","then","data","item","console","log","catch","errorMessage","students","student","id_etudiant","splice","indexOf","refreshStudent","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,OAAT,QAAwB,cAAxB;AACA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,OAAOC,OAAP,MAAoB,2BAApB,C,CAGA;AACA;;IAEMC,S;;;;;AACF,uBACA;AAAA;;AAAA;;AACI;AAEA,UAAKC,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAE,KADA;AAETC,MAAAA,SAAS,EAAE,EAFF;AAGTC,MAAAA,KAAK,EAAE;AAHE,KAAb;AAHJ;AAQC;;;;wCAEmB;AAChB,WAAKC,cAAL;AACH,K,CAED;AACI;AACJ;;;;qCAEiB;AAAA;;AACb,WAAKC,QAAL,CAAc;AAAEJ,QAAAA,OAAO,EAAE;AAAX,OAAd;AACAK,MAAAA,KAAK,WAAIV,OAAJ,gBACG;AACAW,QAAAA,MAAM,EAAE,KADR;AAEAC,QAAAA,OAAO,EAAE;AAAC,oBAAU,kBAAX;AAA+B,0BAAgB,kBAA/C;AAAkE,yCAA8B,6BAAhG;AAA+H,8CAAoC;AAAnK;AAFT,OADH,CAAL,CAMKC,IANL,CAMUd,cANV,EAOKc,IAPL,CAOU,UAACC,IAAD,EAAU;AACZ,YAAMR,SAAS,GAAIQ,IAAI,CAACC,IAAxB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYX,SAAZ;;AACA,QAAA,MAAI,CAACG,QAAL,CAAc;AACVH,UAAAA,SAAS,EAATA,SADU;AAEVD,UAAAA,OAAO,EAAE;AAFC,SAAd;AAIH,OAdL,EAeKa,KAfL,CAeW,UAACX,KAAD,EAAW;AACd,QAAA,MAAI,CAACE,QAAL,CAAc;AAAEF,UAAAA,KAAK,EAAGA,KAAK,CAACY,YAAhB;AAA8Bd,UAAAA,OAAO,EAAE;AAAvC,SAAd;AACH,OAjBL;AAkBH;;;mCAEce,Q,EAAUC,O,EAAS;AAC9B;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAYI,OAAO,CAACC,WAAhC;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAYG,QAAZ;AACAA,MAAAA,QAAQ,CAACG,MAAT,CAAgBH,QAAQ,CAACI,OAAT,CAAiBH,OAAjB,CAAhB,EAA2C,CAA3C;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAYG,QAAZ,EAL8B,CAM9B;AACA;AACH;;;6BAEQ;AAAA,wBAC+B,KAAKhB,KADpC;AAAA,UACEC,OADF,eACEA,OADF;AAAA,UACWE,KADX,eACWA,KADX;AAAA,UACkBD,SADlB,eACkBA,SADlB;;AAEL,UAAGD,OAAH,EAAY;AACR,eAAO;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAmC,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAnC,CAAP;AACH;;AACD,UAAGE,KAAH,EAAU;AACN,eAAO;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAwBA,KAAxB,CAAP;AACH;;AACD,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,cAAD;AAAgB,QAAA,SAAS,EAAED,SAA3B;AAAsC,QAAA,QAAQ,EAAE,KAAKmB,cAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ;AAKH;;;;EAjEmB3B,KAAK,CAAC4B,S;;AAoE9B,eAAevB,SAAf,C,CAEA","sourcesContent":["import React from 'react';\nimport { handleResponse } from '../../helpers';\nimport { API_URL } from '../../config';\nimport TableEtudiants from './TableEtudiants/TableEtudiants.js';\nimport Loading from '../shared/Loading/Loading';\n\n\n// Access to fetch at 'http://127.0.0.1:5000/api/v1.0/etudiant' from origin 'http://localhost:3000' has been blocked \n// by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.\n\nclass Etudiants extends React.Component {\n    constructor() \n    {\n        super();\n\n        this.state = {\n            loading: false,\n            etudiants: [],\n            error: null\n        }\n    }\n\n    componentDidMount() {\n        this.fetchEtudiants();\n    }\n\n    //componentDidUpdate() {\n        //this.fetchEtudiants();\n    //}\n\n    fetchEtudiants() {\n        this.setState({ loading: true });\n        fetch(`${API_URL}/etudiant`, \n                {\n                method: 'get',\n                headers: {'Accept': 'application/json', 'Content-Type': 'application/json','Access-Control-Allow-Origin':'GET POST PUT DELETE OPTIONS', 'Access-Control-Allow-Credentials': 'true'}\n                }\n            )\n            .then(handleResponse)\n            .then((data) => {\n                const etudiants  = data.item;\n                console.log(etudiants);\n                this.setState({\n                    etudiants,\n                    loading: false\n                });\n            })\n            .catch((error) => {\n                this.setState({ error : error.errorMessage, loading: false });\n            });\n    }\n\n    refreshStudent(students, student) {\n        //getstate();\n        console.log('refresh' + student.id_etudiant)\n        console.log(students)\n        students.splice(students.indexOf(student), 1)\n        console.log(students)\n        //console.log(this.state.etudiants.indexOf(student.id_etudiant))\n        //this.state.etudiants.splice(this.state.etudiants.indexOf(student.id_etudiant), 1)\n    }\n\n    render() {\n        const {loading, error, etudiants} = this.state;\n        if(loading) {\n            return <div className=\"loading-container\"><Loading /></div>\n        }\n        if(error) {\n            return <div className=\"error\">{error}</div>\n        }\n        return (\n            <div>\n                <TableEtudiants etudiants={etudiants} rerender={this.refreshStudent}/>\n            </div>\n        )\n    }\n}\n\nexport default Etudiants;\n\n// <TableEtudiants etudiants={etudiants} rerender={this.fetchEtudiants}/>"]},"metadata":{},"sourceType":"module"}